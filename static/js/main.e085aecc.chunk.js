(this["webpackJsonpsnowball-task-ui"]=this["webpackJsonpsnowball-task-ui"]||[]).push([[0],{12:function(e,n,t){e.exports=t(21)},17:function(e,n,t){},20:function(e,n,t){},21:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(7),i=t.n(o),c=(t(17),t(1)),u=t(2),s=t(3);function l(){var e=Object(u.a)(["\n  width: 10px;\n  height: 25px;\n  border-radius: 3px;\n  position: relative;\n  top: -5px;\n  opacity: 0.5;\n  background: rgb(102, 202, 249);\n  cursor: pointer;\n  &:active {\n    background: rgba(15, 127, 255);\n  }\n"]);return l=function(){return e},e}function d(){var e=Object(u.a)(["\n  border-radius: 3px;\n  position: absolute;\n  height: 100%;\n  opacity: 0.5;\n  background: rgb(102, 202, 249);\n"]);return d=function(){return e},e}function m(){var e=Object(u.a)(["\n  position: relative;\n  border-radius: 3px;\n  background: #dddddd;\n  height: 15px;\n"]);return m=function(){return e},e}function g(){var e=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  padding-bottom: 5px\n"]);return g=function(){return e},e}var f=s.a.div(g()),p=s.a.div(m()),b=s.a.div(d()),v=s.a.div(l()),E=function(e,n,t){return(e-n)/(t-n)*100},O=function(e){var n=e.initial,t=e.min,o=e.max,i=e.formatFn,c=e.onChange,u=E(n,t,o),s=Object(a.useRef)(),l=Object(a.useRef)(),d=Object(a.useRef)(),m=Object(a.useRef)(),g=Object(a.useRef)(),O=Object(a.useCallback)((function(e,n){d.current.style.left=function(e){return"calc(".concat(e,"% - 5px)")}(n),l.current.style.width=function(e){return"".concat(e,"%")}(n),m.current.textContent=i(e)}),[i]),h=function(e){var n=e.clientX-g.current-s.current.getBoundingClientRect().left,a=s.current.offsetWidth-d.current.offsetWidth;n<0&&(n=0),n>a&&(n=a);var r=E(n,0,a),i=function(e,n,t){return(t-n)/100*e+n}(r,t,o);O(i,r),c(i)},D=function e(){document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",h)};return Object(a.useEffect)((function(){O(n,u)}),[n,u,O]),r.a.createElement(r.a.Fragment,null,r.a.createElement(f,{id:"header-slider",name:"header-slider"},r.a.createElement("div",null,i(t)),r.a.createElement("div",null,r.a.createElement("strong",{ref:m}),"\xa0/\xa0",i(o))),r.a.createElement(p,{id:"styled-slider",name:"styled-slider",ref:s},r.a.createElement(b,{id:"progress-slider",name:"progress-slider",ref:l}),r.a.createElement(v,{id:"thumb-slider",name:"thumb-slider",ref:d,onMouseDown:function(e){g.current=e.clientX-d.current.getBoundingClientRect().left,document.addEventListener("mousemove",h),document.addEventListener("mouseup",D)}})))};O.defaultProps={formatFn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e.toFixed(0)},onChange:function(){},initial:0,min:0,max:100};var h=O,D=(t(20),Object.freeze({FILE_DETECTED:"File Detected",DROP_HERE:"Drop Here",DROP:"Drop",DONE:"Done",FAIL:"Fail to upload",PREVIEW:"Preview"})),w=D.DROP,j=D.DONE,x=D.PREVIEW,R=D.FAIL,k=function(e){var n=e.scale,t=e.status,a=e.onDragEnter,o=e.onDrop,i=e.onDragOver,c=e.preview,u=e.onAbortClick,s=e.percentage;return r.a.createElement("div",{style:{width:"".concat(.8*n,"%")},className:"DropArea ".concat(t===w&&"Over"," \n      ").concat(t.indexOf("%")>-1||t===j&&"Uploading"),onDragOver:i,onDrop:o,onDragLeave:a,id:"imager",name:"imager"},r.a.createElement("div",{id:"container-imager",name:"container-imager",className:"ImageProgress ".concat(c&&"Show")},r.a.createElement("div",{id:"progress-imager",name:"progress-imager",className:"ImageProgressImage ".concat(t===j&&"Done"),style:{backgroundImage:"url(".concat(c,")")}}),r.a.createElement("div",{id:"upload-imager",name:"upload-imager",className:"ImageProgressUploaded",style:{backgroundImage:"url(".concat(c,")"),clipPath:"inset(".concat(100-Number(s),"% 0 0 0)")}})),r.a.createElement("div",{id:"status-imager",name:"status-imager",className:"Status ".concat(t.indexOf("%")>-1||t===j&&"Uploading")},t),(t===x||t===j||t===R)&&r.a.createElement("div",{id:"abort-imager",name:"abort-imager",className:"Abort",onClick:u},r.a.createElement("span",null,"\xd7")))};function P(){var e=Object(u.a)(["\n  padding: 12px;\n  background: rgb(102, 202, 249);\n  border: 0;\n  color: white;\n  border-radius: 3px;\n  font-weight: 500;\n  font-size: 10pt;\n  cursor: pointer;\n  max-width: 130px;\n  &:hover {\n  background: rgba(15, 127, 255, 0.9);\n  color: white\n  };\n  &:disabled  {\n  background: #efefef;\n  color: lightgrey\n  };\n"]);return P=function(){return e},e}var y=s.a.button(P()),C=function(e){var n=e.onClick,t=e.status,a=e.uploading;return r.a.createElement(y,{id:"button-submit",name:"button-submit",type:"submit",onClick:n,disabled:t!==D.PREVIEW||a},"Upload image")},F="".concat("http://localhost:5000","/api/upload/image"),I=function(){var e=Object(a.useState)(D.DROP_HERE),n=Object(c.a)(e,2),t=n[0],o=n[1],i=Object(a.useState)(null),u=Object(c.a)(i,2),s=u[0],l=u[1],d=Object(a.useState)(0),m=Object(c.a)(d,2),g=m[0],f=m[1],p=Object(a.useState)(!0),b=Object(c.a)(p,2),v=b[0],E=b[1],O=Object(a.useState)(!1),w=Object(c.a)(O,2),j=w[0],x=w[1],R=Object(a.useState)(100),P=Object(c.a)(R,2),y=P[0],I=P[1],L=Object(a.useState)(new FormData),N=Object(c.a)(L,2),S=N[0],T=N[1],W=function(e){v&&o(D.FILE_DETECTED),e.stopPropagation(),e.preventDefault()};return r.a.createElement("div",{className:"App",onDragEnter:W,onDragLeave:function(e){v&&o(D.DROP_HERE),e.preventDefault()},onDragOver:function(e){return e.preventDefault()}},r.a.createElement(k,{scale:y,status:t,onDragEnter:W,onDrop:function(e){var n=(e.dataTransfer.files[0]||{}).type;if(["image/jpeg","image/png"].indexOf(n)>-1&&v){var t=new FileReader;t.onload=function(e){return l(e.target.result)},t.readAsDataURL(e.dataTransfer.files[0]);var a=new FormData;a.append("image",e.dataTransfer.files[0]),a.append("size",window.innerWidth),T(a),o(D.PREVIEW),E(!1)}e.preventDefault()},onDragOver:function(e){v&&o(D.DROP),e.preventDefault()},preview:s,onAbortClick:function(){l(null),o(D.DROP_HERE),f(0),T(new FormData),E(!0)},percentage:g}),r.a.createElement("div",{className:"slider"},r.a.createElement(h,{onChange:function(e){I(e)},initial:100,min:5,max:100})),r.a.createElement(C,{onClick:function(){x(!0);var e=new XMLHttpRequest;e.upload.onprogress=function(e){var n=e.position||e.loaded,t=e.totalSize||e.total,a=Math.floor(n/t*1e3)/10;a<100?o("".concat(a,"%")):(l(null),o("Loading...")),f(a)},e.open("POST",F),e.onreadystatechange=function(n){if(4===e.readyState)if(200===e.status){console.log(e.responseText);var t=JSON.parse(e.responseText);o(D.DONE),l(t.fileUrl),f(0),x(!1)}else console.log("Error",e.statusText),x(!1),o("Fail to upload")},e.send(S)},status:t,uploading:j}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[12,1,2]]]);
//# sourceMappingURL=main.e085aecc.chunk.js.map